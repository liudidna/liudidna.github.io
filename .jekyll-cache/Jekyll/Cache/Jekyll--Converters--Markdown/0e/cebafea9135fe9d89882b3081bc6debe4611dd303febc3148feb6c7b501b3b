I"˚ô<h3 id="top_title" class="no_toc">Contents</h3>

<ul id="markdown-toc">
  <li><a href="#related-to-pdb-files" id="markdown-toc-related-to-pdb-files">Related to PDB files</a>    <ul>
      <li><a href="#--edit_pdb_atompy-parse-and-edit-pdb-files" id="markdown-toc---edit_pdb_atompy-parse-and-edit-pdb-files"><i class="fab fa-python"></i> <i class="far fa-comment-dots"></i> <code class="language-plaintext highlighter-rouge">edit_pdb_atom.py</code>: parse and edit PDB files</a></li>
      <li><a href="#--res_renumber_pdb_atompy-renumber-the-residue-by-both-resseq-and-chainid" id="markdown-toc---res_renumber_pdb_atompy-renumber-the-residue-by-both-resseq-and-chainid"><i class="fab fa-python"></i> <i class="far fa-comment-dots"></i> <code class="language-plaintext highlighter-rouge">res_renumber_pdb_atom.py</code>: renumber the residue by both resSeq and chainID</a></li>
      <li><a href="#-reorder_pdb_atom_by_chainpy-reorder-the-records-of-atoms-based-on-the-alphabetic-order-of-chainids" id="markdown-toc--reorder_pdb_atom_by_chainpy-reorder-the-records-of-atoms-based-on-the-alphabetic-order-of-chainids"><i class="fab fa-python"></i> <code class="language-plaintext highlighter-rouge">reorder_pdb_atom_by_chain.py</code>: reorder the records of atoms based on the alphabetic order of chainIDs</a></li>
      <li><a href="#--symmetry_2_reorder_argspy-generate-args-based-on-symmetry-for-reorder_pdb_atom_by_chainpy" id="markdown-toc---symmetry_2_reorder_argspy-generate-args-based-on-symmetry-for-reorder_pdb_atom_by_chainpy"><i class="fab fa-python"></i> <i class="far fa-comment-dots"></i> <code class="language-plaintext highlighter-rouge">symmetry_2_reorder_args.py</code>: generate args based on symmetry for <code class="language-plaintext highlighter-rouge">reorder_pdb_atom_by_chain.py</code></a></li>
      <li><a href="#-average_structure_pdb_atompy-generate-the-average-coordinates-of-the-structures-from-multiple-pdb-files" id="markdown-toc--average_structure_pdb_atompy-generate-the-average-coordinates-of-the-structures-from-multiple-pdb-files"><i class="fab fa-python"></i> <code class="language-plaintext highlighter-rouge">average_structure_pdb_atom.py</code>: generate the average coordinates of the structures from multiple PDB files</a></li>
      <li><a href="#--add_phosphate_pdbpy-add-5-end-phosphates-to-rna-strands" id="markdown-toc---add_phosphate_pdbpy-add-5-end-phosphates-to-rna-strands"><i class="fab fa-python"></i> <i class="far fa-comment-dots"></i> <code class="language-plaintext highlighter-rouge">add_phosphate_pdb.py</code>: add 5‚Äô-end phosphates to RNA strands</a></li>
      <li><a href="#--3-related-scripts-a-add_triphosphate_pdbpy-add-5-triphosphate-b-add_cyclicphosphate_pdbpy-add-23-cyclic-phosphate-and-c-remove_extraphosphate_pdbpy-remove-5-triphosphate-or-23-cyclic-phosphate" id="markdown-toc---3-related-scripts-a-add_triphosphate_pdbpy-add-5-triphosphate-b-add_cyclicphosphate_pdbpy-add-23-cyclic-phosphate-and-c-remove_extraphosphate_pdbpy-remove-5-triphosphate-or-23-cyclic-phosphate"><i class="fab fa-python"></i> <i class="far fa-comment-dots"></i> 3 related scripts: (a) <code class="language-plaintext highlighter-rouge">add_triphosphate_pdb.py</code>: add 5‚Äô-triphosphate, (b) <code class="language-plaintext highlighter-rouge">add_cyclicphosphate_pdb.py</code>: add 2‚Äô,3‚Äô-cyclic phosphate, and (c) <code class="language-plaintext highlighter-rouge">remove_extraphosphate_pdb.py</code>: remove 5‚Äô-triphosphate or 2‚Äô,3‚Äô-cyclic phosphate</a></li>
      <li><a href="#-convertpdb-shell-script-for-pdb-format-conversion" id="markdown-toc--convertpdb-shell-script-for-pdb-format-conversion"><i class="fas fa-terminal"></i> <code class="language-plaintext highlighter-rouge">convertPDB</code>: shell script for PDB format conversion</a></li>
    </ul>
  </li>
  <li><a href="#related-to-simrna" id="markdown-toc-related-to-simrna">Related to SimRNA</a>    <ul>
      <li><a href="#-get_sticky_from_seq_sspy-create-stacking-restraints-for-simrna" id="markdown-toc--get_sticky_from_seq_sspy-create-stacking-restraints-for-simrna"><i class="fab fa-python"></i> <code class="language-plaintext highlighter-rouge">get_sticky_from_seq_ss.py</code>: create stacking restraints for SimRNA</a></li>
      <li><a href="#-stack_pdb_atompy-create-a-pdb-file-containing-a-stacked-helix" id="markdown-toc--stack_pdb_atompy-create-a-pdb-file-containing-a-stacked-helix"><i class="fab fa-python"></i> <code class="language-plaintext highlighter-rouge">stack_pdb_atom.py</code>: create a PDB file containing a stacked helix</a></li>
      <li><a href="#-terminal_pdb_atompy-create-a-pdb-file-containing-a-base-pair" id="markdown-toc--terminal_pdb_atompy-create-a-pdb-file-containing-a-base-pair"><i class="fab fa-python"></i> <code class="language-plaintext highlighter-rouge">terminal_pdb_atom.py</code>: create a PDB file containing a base pair</a></li>
      <li><a href="#-pdb_2_simrna_dist_restrs_alignedpy-create-simrna-distance-restraints" id="markdown-toc--pdb_2_simrna_dist_restrs_alignedpy-create-simrna-distance-restraints"><i class="fab fa-python"></i> <code class="language-plaintext highlighter-rouge">pdb_2_SimRNA_dist_restrs_aligned.py</code>: create SimRNA distance restraints</a></li>
      <li><a href="#-trafl_reducepy-reduce-the-amount-of-coordinates-in-the-simrna-trafl-file" id="markdown-toc--trafl_reducepy-reduce-the-amount-of-coordinates-in-the-simrna-trafl-file"><i class="fab fa-python"></i> <code class="language-plaintext highlighter-rouge">trafl_reduce.py</code>: reduce the amount of coordinates in the SimRNA trafl file</a></li>
    </ul>
  </li>
  <li><a href="#related-to-uscf-chimera" id="markdown-toc-related-to-uscf-chimera">Related to USCF Chimera</a>    <ul>
      <li><a href="#--transfer_savepos_chimerapy-transfer-chimera-savepos-positions" id="markdown-toc---transfer_savepos_chimerapy-transfer-chimera-savepos-positions"><i class="fab fa-python"></i> <i class="far fa-comment-dots"></i> <code class="language-plaintext highlighter-rouge">transfer_savepos_chimera.py</code>: transfer Chimera <code class="language-plaintext highlighter-rouge">savepos</code> positions</a></li>
      <li><a href="#-compare_chimera_swapnacpp-need-to-convert-from-c-to-python3" id="markdown-toc--compare_chimera_swapnacpp-need-to-convert-from-c-to-python3"><i class="fab fa-cuttlefish"></i> <code class="language-plaintext highlighter-rouge">compare_chimera_swapna.cpp</code> need to convert from C++ to python3</a></li>
    </ul>
  </li>
  <li><a href="#related-to-phenix" id="markdown-toc-related-to-phenix">Related to Phenix</a>    <ul>
      <li><a href="#--phenix_na_sspy-create-the-class-for-storing-base_pair-and-stacking_pair-records-for-secondary-structure-restraints-of-phenix-and-reorder-these-records" id="markdown-toc---phenix_na_sspy-create-the-class-for-storing-base_pair-and-stacking_pair-records-for-secondary-structure-restraints-of-phenix-and-reorder-these-records"><i class="fab fa-python"></i> <i class="far fa-comment-dots"></i> <code class="language-plaintext highlighter-rouge">phenix_na_ss.py</code>: create the class for storing <code class="language-plaintext highlighter-rouge">base_pair</code> and <code class="language-plaintext highlighter-rouge">stacking_pair</code> records for secondary structure restraints of Phenix and reorder these records</a></li>
    </ul>
  </li>
  <li><a href="#other" id="markdown-toc-other">Other</a>    <ul>
      <li><a href="#--ranking_energy_nanotilerpy-post-process-nanotiler-output-log-files" id="markdown-toc---ranking_energy_nanotilerpy-post-process-nanotiler-output-log-files"><i class="fab fa-python"></i> <i class="far fa-comment-dots"></i> <code class="language-plaintext highlighter-rouge">ranking_energy_nanotiler.py</code>: post-process Nanotiler output log files</a></li>
      <li><a href="#-gen_qrnas_bp_restraintcpp-need-to-convert-from-c-to-python3" id="markdown-toc--gen_qrnas_bp_restraintcpp-need-to-convert-from-c-to-python3"><i class="fab fa-cuttlefish"></i> <code class="language-plaintext highlighter-rouge">gen_qrnas_bp_restraint.cpp</code> need to convert from C++ to python3</a></li>
    </ul>
  </li>
</ul>

<hr />

<p><a href="#top_title">
    <button style="position: fixed; top: 90%; right: 10%; border-radius: 50%; padding: 0.5em 1em;"><i class="fas fa-sync"></i> To top</button>
</a></p>

<!-- Shared files are in the dropbox folder "/Users/wyssuser/AllDropbox/Dropbox (Personal)/research/LabSharing/softwares/self_pythonpath_db". This folder is synced with "/Users/wyssuser/programs/self_pythonpath".  -->

<p class="box-note"><em><strong>Note</strong>: If not specified otherwise, all python scripts should be run with <code class="language-plaintext highlighter-rouge">python3.x</code>. The scripts are currently only tested with <code class="language-plaintext highlighter-rouge">macOS Mojave</code>. Feel free to contact me if the links expire or there‚Äôs any other question.</em></p>

<h2 id="related-to-pdb-files">Related to PDB files</h2>
<h3 id="--edit_pdb_atompy-parse-and-edit-pdb-files"><i class="fab fa-python"></i> <i class="far fa-comment-dots"></i> <code class="language-plaintext highlighter-rouge">edit_pdb_atom.py</code>: parse and edit PDB files</h3>
<ul>
  <li>Access <code class="language-plaintext highlighter-rouge">edit_pdb_atom.py</code> by the <a href="https://www.dropbox.com/s/b712mcc35a0kc9z/edit_pdb_atom.py?dl=0" target="_blank">link</a>;</li>
  <li>It is used to parse pdb files, mainly for being imported of other scripts: so consider adding the directory containing it to <code class="language-plaintext highlighter-rouge">PYTHONPATH</code> by <code class="language-plaintext highlighter-rouge">export PYTHONPATH=$PYTHONPATH:PATH_TO_THE_DIRECTORY</code>, or use <code class="language-plaintext highlighter-rouge">sys.path.append("PATH_TO_THE_DIRECTORY")</code>;</li>
  <li>PDB record: I is int, S is string, F is float;</li>
  <li>
    <table>
      <thead>
        <tr>
          <th>Record</th>
          <th>recordName</th>
          <th>serial</th>
          <th>name</th>
          <th>resName</th>
          <th>chainID</th>
          <th>resSeq</th>
          <th>x</th>
          <th>y</th>
          <th>z</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>Type</td>
          <td>String(6)</td>
          <td>String(5)</td>
          <td>String(4)</td>
          <td>String(3)</td>
          <td>String(1)</td>
          <td>Integer(4)</td>
          <td>Real(8.3)</td>
          <td>Real(8.3)</td>
          <td>Real(8.3)</td>
        </tr>
        <tr>
          <td>Get</td>
          <td>S[:6]</td>
          <td>I(S[6:11])</td>
          <td>S[12:16].strip()</td>
          <td>S[17:20].strip()</td>
          <td>S[21] (?S[20]?)</td>
          <td>I(S[22:26])</td>
          <td>F(S[30:38])</td>
          <td>F(S[38:46])</td>
          <td>F(S[46:54])</td>
        </tr>
        <tr>
          <td>Example</td>
          <td>HETATM</td>
          <td>2</td>
          <td>PB</td>
          <td>GTP</td>
          <td>X</td>
          <td>10</td>
          <td>¬†</td>
          <td>¬†</td>
          <td>¬†</td>
        </tr>
      </tbody>
    </table>
  </li>
  <li>It contains:
    <ul>
      <li>class <code class="language-plaintext highlighter-rouge">pdb_atom_record</code></li>
      <li>class <code class="language-plaintext highlighter-rouge">pdb_ter_record</code> (inherited from <code class="language-plaintext highlighter-rouge">pdb_atom_record</code>)</li>
      <li>functions <code class="language-plaintext highlighter-rouge">file2rec</code> and <code class="language-plaintext highlighter-rouge">rec2file</code>: to read from and write into files</li>
    </ul>
  </li>
  <li><i class="far fa-comment-dots"></i> <strong><em>Coding notes:</em></strong>
    <ul>
      <li>Pass a class member as a default value for a class method, see <code class="language-plaintext highlighter-rouge">update_resSeq</code> method:
        <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">update_resSeq</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">new_resSeq</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">by_shift</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span> <span class="c1"># new_resSeq=self.resSeq generates error!
</span>    <span class="k">if</span> <span class="n">new_resSeq</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">new_resSeq</span> <span class="o">=</span> <span class="bp">self</span><span class="p">.</span><span class="n">resSeq</span>
    <span class="p">...</span>
</code></pre></div>        </div>
      </li>
      <li>Use<code class="language-plaintext highlighter-rouge">print(edit_pdb_atom.__doc__)</code> or <code class="language-plaintext highlighter-rouge">help(edit_pdb_atom)</code> to read the <code class="language-plaintext highlighter-rouge">docstring</code> or more info.</li>
    </ul>
  </li>
</ul>

<h3 id="--res_renumber_pdb_atompy-renumber-the-residue-by-both-resseq-and-chainid"><i class="fab fa-python"></i> <i class="far fa-comment-dots"></i> <code class="language-plaintext highlighter-rouge">res_renumber_pdb_atom.py</code>: renumber the residue by both resSeq and chainID</h3>
<ul>
  <li>Access <code class="language-plaintext highlighter-rouge">res_renumber_pdb_atom.py</code> by the <a href="https://www.dropbox.com/s/o3ljcw4xflpm93c/res_renumber_pdb_atom.py?dl=0" target="_blank">link</a>;</li>
  <li>Use by <code class="language-plaintext highlighter-rouge">python res_renumber_pdb_atom.py file.pdb 123A 456X 153B 356Y xxX yyY</code>, where <code class="language-plaintext highlighter-rouge">xxX</code> and <code class="language-plaintext highlighter-rouge">yyY</code> are old and new residues;</li>
  <li>It will also generate restraints for <strong>SimRNA</strong> by calling <code class="language-plaintext highlighter-rouge">pdb_2_SimRNA_dist_restrs_aligned.py</code> with <code class="language-plaintext highlighter-rouge">os.system("some string of CMD")</code>, useful for restraining known motifs;</li>
  <li><i class="far fa-comment-dots"></i> <strong><em>Coding notes:</em></strong>
    <ul>
      <li><code class="language-plaintext highlighter-rouge">sys.argv</code>, <code class="language-plaintext highlighter-rouge">sys.exit(1)</code> from <code class="language-plaintext highlighter-rouge">sys</code> module;</li>
      <li><code class="language-plaintext highlighter-rouge">os.path.isfile(some_file_path)</code>, <code class="language-plaintext highlighter-rouge">os.system("some string of CMD")</code> from <code class="language-plaintext highlighter-rouge">os</code> module;</li>
      <li><code class="language-plaintext highlighter-rouge">os.path...</code> should not be confused with <code class="language-plaintext highlighter-rouge">sys.path...</code> (from <code class="language-plaintext highlighter-rouge">sys</code> module).</li>
    </ul>
  </li>
</ul>

<h3 id="-reorder_pdb_atom_by_chainpy-reorder-the-records-of-atoms-based-on-the-alphabetic-order-of-chainids"><i class="fab fa-python"></i> <code class="language-plaintext highlighter-rouge">reorder_pdb_atom_by_chain.py</code>: reorder the records of atoms based on the alphabetic order of chainIDs</h3>
<ul>
  <li>Access <code class="language-plaintext highlighter-rouge">reorder_pdb_atom_by_chain.py</code> by the <a href="https://www.dropbox.com/s/8bb08e2g1kulo80/reorder_pdb_atom_by_chain.py?dl=0" target="_blank">link</a>;</li>
  <li>Use by <code class="language-plaintext highlighter-rouge">python reorder_pdb_atom_by_chain.py file.pdb</code> or <code class="language-plaintext highlighter-rouge">python reorder_pdb_atom_by_chain.py file.pdb 123A 456X 153B 356Y xxX yyY</code>, where <code class="language-plaintext highlighter-rouge">xxX</code> and <code class="language-plaintext highlighter-rouge">yyY</code> are old and new residues;</li>
  <li>For the latter, residues (chainID and resSeq) are changed by adapting <code class="language-plaintext highlighter-rouge">res_renumber_pdb_atom.py</code></li>
  <li>If you only want to change the chainID, you can do something like <code class="language-plaintext highlighter-rouge">python reorder_pdb_atom_by_chain.py file.pdb 1A 1X 1B 1Y ... ...</code> so that there is <strong>no shift</strong> of the resSeq.</li>
</ul>

<h3 id="--symmetry_2_reorder_argspy-generate-args-based-on-symmetry-for-reorder_pdb_atom_by_chainpy"><i class="fab fa-python"></i> <i class="far fa-comment-dots"></i> <code class="language-plaintext highlighter-rouge">symmetry_2_reorder_args.py</code>: generate args based on symmetry for <code class="language-plaintext highlighter-rouge">reorder_pdb_atom_by_chain.py</code></h3>
<ul>
  <li>Access <code class="language-plaintext highlighter-rouge">symmetry_2_reorder_args.py</code> by the <a href="https://www.dropbox.com/s/juxs8gh7eqdp4af/symmetry_2_reorder_args.py?dl=0" target="_blank">link</a>;</li>
  <li>Two modes to use:
    <ol>
      <li><em>Concise</em>: <code class="language-plaintext highlighter-rouge">python symmetry_2_reorder_args.py 3 AF</code>, where <code class="language-plaintext highlighter-rouge">3</code> is the symmetry fold, <code class="language-plaintext highlighter-rouge">AF</code> means contains chains A to F;</li>
      <li><em>Verbose</em>: <code class="language-plaintext highlighter-rouge">python symmetry_2_reorder_args.py AB CD EF</code>, where all the symmetry-related components are indicated.</li>
    </ol>
  </li>
  <li>Outputs to appear in console can be directly used as args for script <code class="language-plaintext highlighter-rouge">reorder_pdb_atom_by_chain.py</code>;</li>
  <li>The three scripts <code class="language-plaintext highlighter-rouge">symmetry_2_reorder_args.py</code>, <code class="language-plaintext highlighter-rouge">reorder_pdb_atom_by_chain.py</code> and <code class="language-plaintext highlighter-rouge">average_structure_pdb_atom.py</code> are useful to generate symmetric oligomers (see <a href="/2020-12-26-create-symmetric" target="_blank">an example</a>);</li>
  <li><i class="far fa-comment-dots"></i> <strong><em>Coding notes:</em></strong>
    <ul>
      <li>An iterator, once exhausted, may not be reused. In Python 3.x, <code class="language-plaintext highlighter-rouge">zip()</code> returns an iterator. <a href="https://stackoverflow.com/questions/50465966/re-using-zip-iterator-in-python-3/50466346">Similar question</a>;</li>
      <li>Enable its repeated usage by converting to a list <code class="language-plaintext highlighter-rouge">zipping = list(zip(*sym_partners))</code>, where <code class="language-plaintext highlighter-rouge">sym_partners</code> is a list of lists (<em>i.e.</em> 2D array) in the script.</li>
    </ul>
  </li>
</ul>

<h3 id="-average_structure_pdb_atompy-generate-the-average-coordinates-of-the-structures-from-multiple-pdb-files"><i class="fab fa-python"></i> <code class="language-plaintext highlighter-rouge">average_structure_pdb_atom.py</code>: generate the average coordinates of the structures from multiple PDB files</h3>
<ul>
  <li>Access <code class="language-plaintext highlighter-rouge">average_structure_pdb_atom.py</code> by the <a href="https://www.dropbox.com/s/en45yzes2xfu4r6/average_structure_pdb_atom.py?dl=0" target="_blank">link</a>;</li>
  <li>Use by <code class="language-plaintext highlighter-rouge">python average_structure_pdb_atom.py file1.pdb file2.pdb ...</code>;</li>
  <li>The output files from <code class="language-plaintext highlighter-rouge">reorder_pdb_atom_by_chain.py</code> are preferred due to the cleaned formats;</li>
  <li>Useful to generate the averaged symmetric structure, see the <a href="/2020-12-16-RNA-triangle" target="_blank">link</a>.</li>
</ul>

<h3 id="--add_phosphate_pdbpy-add-5-end-phosphates-to-rna-strands"><i class="fab fa-python"></i> <i class="far fa-comment-dots"></i> <code class="language-plaintext highlighter-rouge">add_phosphate_pdb.py</code>: add 5‚Äô-end phosphates to RNA strands</h3>
<ul>
  <li>Access <code class="language-plaintext highlighter-rouge">add_phosphate_pdb.py</code> by the <a href="https://www.dropbox.com/s/ik90nozp48040wr/add_phosphate_pdb.py?dl=0" target="_blank">link</a>;</li>
  <li>Use by <code class="language-plaintext highlighter-rouge">python add_phosphate_pdb.py PDBfile_name</code>;</li>
  <li>Operations:
    <ol>
      <li>It first moves an ideal nucleotide (<em>‚Äúsample_nt‚Äù</em>) so that it is aligned with the 5‚Äô-nucleotide (<em>‚Äúcurr_head_res‚Äù</em>) based on <em>‚ÄúC5‚Äô‚Äù, ‚ÄúO4‚Äô‚Äù, ‚ÄúC4‚Äô‚Äù, ‚ÄúC1‚Äô‚Äù</em> (‚ÄúO5‚Äô‚Äù is not necessary, though it can be added by using <a href="https://github.com/openmm/pdbfixer" target="_blank">pdbfixer</a> );</li>
      <li>Then, the moved <em>‚Äúsample_nt‚Äù</em> is slightly moved so that its ‚ÄúC5‚Äô‚Äù is aligned with that of <em>‚Äúcurr_head_res‚Äù</em> with the movement matrix reported to console for evaluation;</li>
      <li>Extra ‚ÄúO5‚Äô‚Äù atoms will be deleted;</li>
      <li>Lastly, the phosphate of <em>‚Äúsample_nt‚Äù</em> is grafted onto <em>‚Äúcurr_head_res‚Äù</em>.</li>
    </ol>
  </li>
  <li>The output PDB file has the serials reordered.</li>
  <li><i class="far fa-comment-dots"></i> <strong><em>Coding notes:</em></strong>
    <ul>
      <li><code class="language-plaintext highlighter-rouge">import numpy as np</code>, to use the <code class="language-plaintext highlighter-rouge">np.array()</code> function to create <code class="language-plaintext highlighter-rouge">ndarray</code>, to use <code class="language-plaintext highlighter-rouge">np.matmul()</code> function for matrix product, and to use <code class="language-plaintext highlighter-rouge">tolist()</code> method of <code class="language-plaintext highlighter-rouge">ndarray</code>;</li>
      <li><code class="language-plaintext highlighter-rouge">copy.deepcopy(some_instance)</code> from <code class="language-plaintext highlighter-rouge">copy</code> module;</li>
      <li><code class="language-plaintext highlighter-rouge">superpose3d.Superpose3D(frozen_cloud, mobile_cloud)</code> from <code class="language-plaintext highlighter-rouge">superpose3d</code> module: the function returns <code class="language-plaintext highlighter-rouge">(RMSD, R, T, c)</code>, <a href="https://pypi.org/project/superpose3d/" target="_blank">more details here</a>.</li>
    </ul>
  </li>
</ul>

<h3 id="--3-related-scripts-a-add_triphosphate_pdbpy-add-5-triphosphate-b-add_cyclicphosphate_pdbpy-add-23-cyclic-phosphate-and-c-remove_extraphosphate_pdbpy-remove-5-triphosphate-or-23-cyclic-phosphate"><i class="fab fa-python"></i> <i class="far fa-comment-dots"></i> 3 related scripts: (a) <code class="language-plaintext highlighter-rouge">add_triphosphate_pdb.py</code>: add 5‚Äô-triphosphate, (b) <code class="language-plaintext highlighter-rouge">add_cyclicphosphate_pdb.py</code>: add 2‚Äô,3‚Äô-cyclic phosphate, and (c) <code class="language-plaintext highlighter-rouge">remove_extraphosphate_pdb.py</code>: remove 5‚Äô-triphosphate or 2‚Äô,3‚Äô-cyclic phosphate</h3>
<ul>
  <li>Access <code class="language-plaintext highlighter-rouge">add_triphosphate_pdb.py</code> by the <a href="https://www.dropbox.com/s/5zq14t0w1u6ybos/add_triphosphate_pdb.py?dl=0" target="_blank">link</a>, and use by <code class="language-plaintext highlighter-rouge">python add_triphosphate_pdb.py PDBfile_name chainID1 chainID2 ...</code>;</li>
  <li>Access <code class="language-plaintext highlighter-rouge">add_cyclicphosphate_pdb.py</code> by the <a href="https://www.dropbox.com/s/djcwcciktaglebx/add_cyclicphosphate_pdb.py?dl=0" target="_blank">link</a>, and use by <code class="language-plaintext highlighter-rouge">add_cyclicphosphate_pdb.py PDBfile_name chainID1 chainID2 ...</code>;</li>
  <li>A current limitation with <code class="language-plaintext highlighter-rouge">add_cyclicphosphate_pdb.py</code> is that the chainID of the input PDB file should be ordered;</li>
  <li>Access <code class="language-plaintext highlighter-rouge">remove_extraphosphate_pdb.py</code> by the <a href="https://www.dropbox.com/s/o826vcld860vv0y/remove_extraphosphate_pdb.py?dl=0" target="_blank">link</a>, and use by <code class="language-plaintext highlighter-rouge">remove_extraphosphate_pdb.py PDBfile_name</code>;</li>
  <li>The three scripts work in a similar with as the <code class="language-plaintext highlighter-rouge">add_phosphate_pdb.py</code> <a href="#--add_phosphate_pdbpy-add-5-end-phosphates-to-rna-strands">above</a>.</li>
  <li><i class="far fa-comment-dots"></i> <strong><em>Coding notes:</em></strong>
    <ul>
      <li>To merge two dictionaries:
        <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">resName_change</span> <span class="o">=</span> <span class="n">resName_triphosphate_change</span><span class="p">.</span><span class="n">copy</span><span class="p">()</span>
<span class="n">resName_change</span><span class="p">.</span><span class="n">update</span><span class="p">(</span><span class="n">resName_cyclicphosphate_change</span><span class="p">)</span>
</code></pre></div>        </div>
      </li>
      <li><a href="https://stackoverflow.com/questions/38987/how-do-i-merge-two-dictionaries-in-a-single-expression-taking-union-of-dictiona#" target="_blank">more details from stackoverflow</a>.</li>
    </ul>
  </li>
</ul>

<h3 id="-convertpdb-shell-script-for-pdb-format-conversion"><i class="fas fa-terminal"></i> <code class="language-plaintext highlighter-rouge">convertPDB</code>: shell script for PDB format conversion</h3>
<ul>
  <li>Access <code class="language-plaintext highlighter-rouge">convertPDB</code> by the <a href="https://www.dropbox.com/s/fkm339n6qfb2hvf/convertPDB?dl=0" target="_blank">link</a> or <a href="https://www.dropbox.com/s/ovnp2rid9nvcpg6/convertPDB.sh?dl=0" target="_blank">preview as text</a>;</li>
  <li><code class="language-plaintext highlighter-rouge">convertPDB -h</code> for usage help;</li>
  <li>Useful for dealing with old format PDB, <strong>qrnas</strong> output, and <strong>vmd</strong> output.</li>
</ul>

<h2 id="related-to-simrna">Related to SimRNA</h2>
<h3 id="-get_sticky_from_seq_sspy-create-stacking-restraints-for-simrna"><i class="fab fa-python"></i> <code class="language-plaintext highlighter-rouge">get_sticky_from_seq_ss.py</code>: create stacking restraints for SimRNA</h3>
<ul>
  <li>Access <code class="language-plaintext highlighter-rouge">get_sticky_from_seq_ss.py</code> by the <a href="https://www.dropbox.com/s/39sjy98a2zzr11d/get_sticky_from_seq_ss.py?dl=0" target="_blank">link</a>;</li>
  <li>Use by <code class="language-plaintext highlighter-rouge">python get_sticky_from_seq_ss.py seq_file ss_file</code>, where <code class="language-plaintext highlighter-rouge">seq_file</code> and <code class="language-plaintext highlighter-rouge">ss_file</code> are <strong>SimRNA</strong>‚Äôs sequence file and secondary-structure file;</li>
  <li>It works by:
    <ol>
      <li>Extracting the sticky-end information from the two input files;</li>
      <li>Then creating a PDB file containing the stacked bases from an ideal RNA helix corresponding to each sticky-end by calling <code class="language-plaintext highlighter-rouge">stack_pdb_atom.py</code>;</li>
      <li>Lastly generating the SimRNA restraints for sticky-end (more precisely, nicked end; output file <code class="language-plaintext highlighter-rouge">restraintsSE_xX.dat</code>) by calling <code class="language-plaintext highlighter-rouge">pdb_2_SimRNA_dist_restrs_aligned.py</code>.</li>
    </ol>
  </li>
  <li>Be prepared that a lot of PDB files and restraint files will be generated.</li>
</ul>

<h3 id="-stack_pdb_atompy-create-a-pdb-file-containing-a-stacked-helix"><i class="fab fa-python"></i> <code class="language-plaintext highlighter-rouge">stack_pdb_atom.py</code>: create a PDB file containing a stacked helix</h3>
<ul>
  <li>Access <code class="language-plaintext highlighter-rouge">stack_pdb_atom.py</code> by the <a href="https://www.dropbox.com/s/39sjy98a2zzr11d/get_sticky_from_seq_ss.py?dl=0" target="_blank">link</a>;</li>
  <li>Use by, for example, <code class="language-plaintext highlighter-rouge">python stack_pdb_atom.py GC 203X 204X 77C 105D</code>, where <code class="language-plaintext highlighter-rouge">GC</code> is the sequence for <code class="language-plaintext highlighter-rouge">203X</code> and <code class="language-plaintext highlighter-rouge">204X</code> while <code class="language-plaintext highlighter-rouge">77C</code> is complementary to <code class="language-plaintext highlighter-rouge">204X</code> and <code class="language-plaintext highlighter-rouge">105D</code> is complementary to <code class="language-plaintext highlighter-rouge">203X</code>;</li>
  <li>It works by:
    <ol>
      <li>Reading the identities of the 4 residues by the 5 input args;</li>
      <li>Then creating a PDB file containing the stacked bases using an ideal RNA helix.</li>
    </ol>
  </li>
  <li>The main function is for generating restraint files of sticky-ends together with <code class="language-plaintext highlighter-rouge">pdb_2_SimRNA_dist_restrs_aligned.py</code> for <strong>SimRNA</strong>.</li>
</ul>

<h3 id="-terminal_pdb_atompy-create-a-pdb-file-containing-a-base-pair"><i class="fab fa-python"></i> <code class="language-plaintext highlighter-rouge">terminal_pdb_atom.py</code>: create a PDB file containing a base pair</h3>
<ul>
  <li>Access <code class="language-plaintext highlighter-rouge">terminal_pdb_atom.py</code> by the <a href="https://www.dropbox.com/s/5icjzo1av8p3zyh/terminal_pdb_atom.py?dl=0" target="_blank">link</a>;</li>
  <li>Use by, for example, <code class="language-plaintext highlighter-rouge">python terminal_pdb_atom.py GC 203A 77B</code>, for a <code class="language-plaintext highlighter-rouge">GC</code> pair formed by <code class="language-plaintext highlighter-rouge">203A</code> and <code class="language-plaintext highlighter-rouge">77B</code>;</li>
  <li>It works by:
    <ol>
      <li>Reading the identities of the 2 residues by the 3 input args;</li>
      <li>Then creating a PDB file containing the pairing bases using an ideal RNA helix.</li>
    </ol>
  </li>
  <li>The main function is for generating restraint files of base pairs together with <code class="language-plaintext highlighter-rouge">pdb_2_SimRNA_dist_restrs_aligned.py</code> for <strong>SimRNA</strong>.</li>
</ul>

<h3 id="-pdb_2_simrna_dist_restrs_alignedpy-create-simrna-distance-restraints"><i class="fab fa-python"></i> <code class="language-plaintext highlighter-rouge">pdb_2_SimRNA_dist_restrs_aligned.py</code>: create SimRNA distance restraints</h3>
<ul>
  <li>Access <code class="language-plaintext highlighter-rouge">pdb_2_SimRNA_dist_restrs_aligned.py</code> by the <a href="https://www.dropbox.com/s/0lshfjut2q2loov/pdb_2_SimRNA_dist_restrs_aligned.py?dl=0" target="_blank">link</a>;</li>
  <li>It is adapted from <a href="https://link.springer.com/protocol/10.1007/978-1-0716-0708-4_6" target="_blank"><em>Michal Boniecki</em></a>‚Äôs script and changes including aligned output and compatibility for python3.x;</li>
  <li>Use by <code class="language-plaintext highlighter-rouge">python pdb_2_SimRNA_dist_restrs_aligned.py file.pdb TOLERANCE(optional, default:0.2)</code>.</li>
</ul>

<h3 id="-trafl_reducepy-reduce-the-amount-of-coordinates-in-the-simrna-trafl-file"><i class="fab fa-python"></i> <code class="language-plaintext highlighter-rouge">trafl_reduce.py</code>: reduce the amount of coordinates in the SimRNA trafl file</h3>
<ul>
  <li>Access <code class="language-plaintext highlighter-rouge">trafl_reduce.py</code> by the <a href="https://www.dropbox.com/s/bme5awehqc90ube/trafl_reduce.py?dl=0" target="_blank">link</a>;</li>
  <li>Use by <code class="language-plaintext highlighter-rouge">python trafl_reduce.py filename.trafl reduction_rate(such as '5' or 'P' for backbone phosphate)</code>;</li>
  <li>If <code class="language-plaintext highlighter-rouge">reduction_rate</code> is an <code class="language-plaintext highlighter-rouge">int</code>, it will reduce the amount of residues by a factor of this <code class="language-plaintext highlighter-rouge">int</code>; if <code class="language-plaintext highlighter-rouge">P</code>, only coordinates for P atoms will be extracted.</li>
</ul>

<h2 id="related-to-uscf-chimera">Related to USCF Chimera</h2>
<h3 id="--transfer_savepos_chimerapy-transfer-chimera-savepos-positions"><i class="fab fa-python"></i> <i class="far fa-comment-dots"></i> <code class="language-plaintext highlighter-rouge">transfer_savepos_chimera.py</code>: transfer Chimera <code class="language-plaintext highlighter-rouge">savepos</code> positions</h3>
<ul>
  <li>Access <code class="language-plaintext highlighter-rouge">transfer_savepos_chimera.py</code> by the <a href="https://www.dropbox.com/s/tsyx2e3h9vxx072/transfer_savepos_chimera.py?dl=0" target="_blank">link</a>;</li>
  <li>Use by <code class="language-plaintext highlighter-rouge">python transfer_savepos_chimera.py from-filename to-filename</code>, while <strong><em>from-file</em></strong> must exist, <strong><em>to-file</em></strong> with <code class="language-plaintext highlighter-rouge">to-filename</code> will be created if not existing;</li>
  <li>The script looks for the line starting with <code class="language-plaintext highlighter-rouge">"\tformattedPositions = "</code> to locate the <strong>dictionary</strong> of the saved positions (note that for a Chimera session (<code class="language-plaintext highlighter-rouge">.py</code>) file with no <code class="language-plaintext highlighter-rouge">savepos</code>, <code class="language-plaintext highlighter-rouge">formattedPositions = {}</code> exists in the <code class="language-plaintext highlighter-rouge">.py</code> file);</li>
  <li><i class="far fa-comment-dots"></i> <strong><em>Coding notes:</em></strong>
    <ul>
      <li><code class="language-plaintext highlighter-rouge">target_frompos = ast.literal_eval(target_frompos_string)</code>: <code class="language-plaintext highlighter-rouge">literal_eval()</code> function from <code class="language-plaintext highlighter-rouge">ast</code> module to convert strings to Python literal structures;</li>
      <li><code class="language-plaintext highlighter-rouge">if 'tolines' not in locals():</code> to check whether ( or not) the variable has been defined, <em>i.e.</em> <code class="language-plaintext highlighter-rouge">locals()</code> function returns the dictionary of current local symbol table.</li>
    </ul>
  </li>
</ul>

<h3 id="-compare_chimera_swapnacpp-need-to-convert-from-c-to-python3"><i class="fab fa-cuttlefish"></i> <code class="language-plaintext highlighter-rouge">compare_chimera_swapna.cpp</code> need to convert from C++ to python3</h3>

<h2 id="related-to-phenix">Related to Phenix</h2>
<h3 id="--phenix_na_sspy-create-the-class-for-storing-base_pair-and-stacking_pair-records-for-secondary-structure-restraints-of-phenix-and-reorder-these-records"><i class="fab fa-python"></i> <i class="far fa-comment-dots"></i> <code class="language-plaintext highlighter-rouge">phenix_na_ss.py</code>: create the class for storing <code class="language-plaintext highlighter-rouge">base_pair</code> and <code class="language-plaintext highlighter-rouge">stacking_pair</code> records for secondary structure restraints of Phenix and reorder these records</h3>
<ul>
  <li>Access <code class="language-plaintext highlighter-rouge">phenix_na_ss.py</code> by the <a href="https://www.dropbox.com/s/54a7iumd3j1ne9m/phenix_na_ss.py?dl=0" target="_blank">link</a>;</li>
  <li>Use by <code class="language-plaintext highlighter-rouge">python phenix_na_ss.py from-filename to-filename</code>, while <strong><em>from-file</em></strong> must exist, <strong><em>to-file</em></strong> with <code class="language-plaintext highlighter-rouge">to-filename</code> will be created;</li>
  <li>The script looks for the line starting with <code class="language-plaintext highlighter-rouge">"\tformattedPositions = "</code> to locate the</li>
</ul>

<h2 id="other">Other</h2>
<h3 id="--ranking_energy_nanotilerpy-post-process-nanotiler-output-log-files"><i class="fab fa-python"></i> <i class="far fa-comment-dots"></i> <code class="language-plaintext highlighter-rouge">ranking_energy_nanotiler.py</code>: post-process Nanotiler output log files</h3>
<ul>
  <li>Access <code class="language-plaintext highlighter-rouge">ranking_energy_nanotiler.py</code> by the <a href="https://www.dropbox.com/s/bk25p4jo339n445/ranking_energy_nanotiler.py?dl=0" target="_blank">link</a>;</li>
  <li>Use by <code class="language-plaintext highlighter-rouge">python ranking_energy_nanotiler.py nt_outfile</code>, where <strong><em>nt_outfile</em></strong> is a <strong>Nanotiler</strong> output log file;</li>
  <li>The  output files should contain the markers written by the nanotiler script files, which should contain:
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># 100*"#"</span>
<span class="nb">echo</span> <span class="c">####################################################################################################</span>
<span class="nb">echo </span>HBP1: <span class="k">${</span><span class="nv">HBP1</span><span class="k">}</span>   HBP2: <span class="k">${</span><span class="nv">HBP2</span><span class="k">}</span>
<span class="c"># 96*"#"</span>
<span class="nb">echo</span> <span class="c">################################################################################################</span>
</code></pre></div>    </div>
  </li>
  <li>So the script can be modified based on the markers written by the <strong>Nanotiler</strong> script;</li>
  <li><i class="far fa-comment-dots"></i> <strong><em>Coding notes:</em></strong>
    <ul>
      <li><code class="language-plaintext highlighter-rouge">from pathlib import Path</code> to convert a string to a <code class="language-plaintext highlighter-rouge">Path</code> object by <code class="language-plaintext highlighter-rouge">p=Path(nt_outfilename)</code>;</li>
      <li><strong>Regex</strong>: use <code class="language-plaintext highlighter-rouge">re</code> module‚Äôs <code class="language-plaintext highlighter-rouge">re.compile()</code> function to create <strong>Regex</strong> objects: <code class="language-plaintext highlighter-rouge">float_re = re.compile(r"([+-]?)(\d+)\.(\d+)([Ee]?)([+-]?)(\d*)")</code> &amp; <code class="language-plaintext highlighter-rouge">float_str = float_re.search(s_s_str).group(0)</code> for search patterns of a <em>float</em> and get its <em>string</em>;</li>
      <li><code class="language-plaintext highlighter-rouge">sorted(dict_energy.items(), key=lambda x: x[1])</code> to get a list containing the items of a <em>dictionary</em> sorted by the <em>values</em>.</li>
    </ul>
  </li>
</ul>

<h3 id="-gen_qrnas_bp_restraintcpp-need-to-convert-from-c-to-python3"><i class="fab fa-cuttlefish"></i> <code class="language-plaintext highlighter-rouge">gen_qrnas_bp_restraint.cpp</code> need to convert from C++ to python3</h3>
:ET